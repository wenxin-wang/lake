#!/bin/bash

# Remove a package from system
. /usr/local/lib/liblake_common
check_commondirs

usage() {
    echo "usage: $(basename $0) [options] pkgfname"
    echo "-h: this help"
}

case "$1" in
    -h)
        usage
        exit
        ;;
esac

if [ $# -ne 1 ]; then
    exit E_WARGS
fi

pkgfname=$1
cmdfile=$pkgfname
arch=${pkgfname##*-}
pkgver=${pkgfname%-$arch}
pkgver=${pkgver##*-}
pkgname=${pkgfname%-$pkgver-$arch}
verdir=$pkgs/$pkgname/$pkgver

if [ ! -d $verdir ]; then
    if [ -e $verdir ]; then
        exit $E_BADDIR
    else
        mkdir -p $verdir
    fi
fi

cd $verdir

if [ ! -e $cmdfile ]; then
    mkcmd $cmdfile
fi

echo $verdir
